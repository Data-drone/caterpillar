

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>caterpillar.processing.analysis package &mdash; Caterpillar 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Caterpillar 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Caterpillar API" href="modules.html"/>
        <link rel="next" title="caterpillar.searching package" href="caterpillar.searching.html"/>
        <link rel="prev" title="caterpillar.processing package" href="caterpillar.processing.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Caterpillar</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#what-is-caterpillar">What is Caterpillar?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#err-what-example-please">Err, What? Example Please...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#why-caterpillar">Why Caterpillar?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#supported-platforms">Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#do-you-support-python-3">Do you support Python 3?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#basic-concepts">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#code-examples">Code Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#creating-and-writing-an-index">Creating and writing an Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#searching-an-index">Searching an Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#index-storage-formats">Index Storage Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html#querying">Querying</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../indexes-schemas.html">Indexes and Schemas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../indexes-schemas.html#designing-a-schema">Designing a Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../indexes-schemas.html#field-types">Field Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../indexes-schemas.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Caterpillar API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="caterpillar.html"><tt class="docutils literal"><span class="pre">caterpillar</span></tt> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="caterpillar.processing.html"><tt class="docutils literal"><span class="pre">caterpillar.processing</span></tt> package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis</span></tt> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="caterpillar.searching.html"><tt class="docutils literal"><span class="pre">caterpillar.searching</span></tt> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="caterpillar.searching.query.html"><tt class="docutils literal"><span class="pre">caterpillar.searching.query</span></tt> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="caterpillar.storage.html"><tt class="docutils literal"><span class="pre">caterpillar.storage</span></tt> package</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Caterpillar</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="modules.html">Caterpillar API</a> &raquo;</li>
      
    <li><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis</span></tt> package</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/api/caterpillar.processing.analysis.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="caterpillar-processing-analysis-package">
<h1><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis</span></tt> package<a class="headerlink" href="#caterpillar-processing-analysis-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-caterpillar.processing.analysis.analyse">
<span id="caterpillar-processing-analysis-analyse-module"></span><h2><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis.analyse</span></tt> module<a class="headerlink" href="#module-caterpillar.processing.analysis.analyse" title="Permalink to this headline">¶</a></h2>
<p>Tools to perform analysis of text streams (aka tokenizing and filtering).</p>
<dl class="class">
<dt id="caterpillar.processing.analysis.analyse.Analyser">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.analyse.</tt><tt class="descname">Analyser</tt><a class="headerlink" href="#caterpillar.processing.analysis.analyse.Analyser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>Abstract base class for an analyser.</p>
<p>All analysers are a combination of a tokenizer and 0 or more filters. This class accesses the tokenizer by calling
self.get_tokenizer() and the filters via self.get_filters(). You need to implement the get_tokenizer() method at
a minimum.</p>
<p>This class also defines the analyse() method which will call the tokenizer followed by the filters in order before
finally returning the token.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.analyse.BiGramAnalyser">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.analyse.</tt><tt class="descname">BiGramAnalyser</tt><big>(</big><em>bi_grams</em>, <em>stopword_list=None</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.analyse.BiGramAnalyser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.analyse.Analyser" title="caterpillar.processing.analysis.analyse.Analyser"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.analyse.Analyser</span></tt></a></p>
<p>A bi-gram <tt class="docutils literal"><span class="pre">Analyser</span></tt> that behaves exactly like the <tt class="docutils literal"><span class="pre">DefaultAnalyser</span></tt> except it also makes use of a
<tt class="docutils literal"><span class="pre">BiGramFilter</span></tt>.</p>
<p>This analyser uses a <tt class="docutils literal"><span class="pre">WordTokenizer</span></tt> in combination with a <tt class="docutils literal"><span class="pre">StopFilter</span></tt>, <tt class="docutils literal"><span class="pre">PositionalLowercaseWordFilter</span></tt> and a
<tt class="docutils literal"><span class="pre">BiGramFilter</span></tt>.</p>
<p>Required Arguments
bi_grams &#8211; a list of string n-grams to match. Passed directly to <tt class="docutils literal"><span class="pre">BiGramFilter</span></tt>.</p>
<p>Optional Arguments:
stopword_list &#8211; A list of stop words to override the default English one.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.analyse.DefaultAnalyser">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.analyse.</tt><tt class="descname">DefaultAnalyser</tt><big>(</big><em>stopword_list=None</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.analyse.DefaultAnalyser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.analyse.Analyser" title="caterpillar.processing.analysis.analyse.Analyser"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.analyse.Analyser</span></tt></a></p>
<p>The default caterpillar <tt class="docutils literal"><span class="pre">Analyser</span></tt> which mostly splits on whitespace and punctuation, except for a few special
cases, and removes stopwords.</p>
<p>This analyzer uses a <tt class="docutils literal"><span class="pre">WordTokenizer</span></tt> in combination with a <tt class="docutils literal"><span class="pre">StopFilter</span></tt> and a <tt class="docutils literal"><span class="pre">PositionalLowercaseWordFilter</span></tt>.</p>
<p>Optional Arguments:
stopword_list &#8211; A list of stop words to override the default <tt class="docutils literal"><span class="pre">stopwords.ENGLISH</span></tt> one.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.analyse.EverythingAnalyser">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.analyse.</tt><tt class="descname">EverythingAnalyser</tt><a class="headerlink" href="#caterpillar.processing.analysis.analyse.EverythingAnalyser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.analyse.Analyser" title="caterpillar.processing.analysis.analyse.Analyser"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.analyse.Analyser</span></tt></a></p>
<p>A EverythingAnalyser just returns the entire input string as a token.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.analyse.PotentialBiGramAnalyser">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.analyse.</tt><tt class="descname">PotentialBiGramAnalyser</tt><a class="headerlink" href="#caterpillar.processing.analysis.analyse.PotentialBiGramAnalyser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.analyse.Analyser" title="caterpillar.processing.analysis.analyse.Analyser"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.analyse.Analyser</span></tt></a></p>
<p>A PotentialBiGramAnalyser returns a list of possible bi-grams from a stream.</p>
<p>This analyser uses a <tt class="docutils literal"><span class="pre">WordTokenizer</span></tt> in combination with a <tt class="docutils literal"><span class="pre">StopFilter</span></tt>, <tt class="docutils literal"><span class="pre">PositionalLowercaseWordFilter</span></tt> and a
<tt class="docutils literal"><span class="pre">PotentialBiGramFilter</span></tt> to generate a stream of possible bi-grams.</p>
</dd></dl>

</div>
<div class="section" id="module-caterpillar.processing.analysis.filter">
<span id="caterpillar-processing-analysis-filter-module"></span><h2><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis.filter</span></tt> module<a class="headerlink" href="#module-caterpillar.processing.analysis.filter" title="Permalink to this headline">¶</a></h2>
<p>Tools for filtering tokens.</p>
<dl class="class">
<dt id="caterpillar.processing.analysis.filter.BiGramFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">BiGramFilter</tt><big>(</big><em>bi_grams</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.filter.BiGramFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>Identifies bi-grams in a token stream from a given list.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rext</span> <span class="o">=</span> <span class="n">RegexTokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">rext</span><span class="p">(</span><span class="s">&quot;this is a bigram&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ngrams</span> <span class="o">=</span> <span class="n">BiGramFilter</span><span class="p">([</span><span class="s">&quot;a bigram&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">bigrams</span><span class="p">(</span><span class="n">stream</span><span class="p">)]</span>
<span class="go">[&quot;this&quot;, &quot;is, &quot;a bigram&quot;]</span>
</pre></div>
</div>
<p>Required Arguments
bi_grams &#8211; A list of n-gram strings to match.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.Filter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">Filter</tt><a class="headerlink" href="#caterpillar.processing.analysis.filter.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>Base class for Filter objects.</p>
<p>A Filter subclass must implement a filter() method that takes a single argument, which is an iterator of Token
objects, and yield a series of Token objects in return.</p>
<dl class="method">
<dt id="caterpillar.processing.analysis.filter.Filter.filter">
<tt class="descname">filter</tt><big>(</big><em>tokens</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.filter.Filter.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return filtered tokens from the tokens iterator.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.LowercaseFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">LowercaseFilter</tt><a class="headerlink" href="#caterpillar.processing.analysis.filter.LowercaseFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>Uses unicode.lower() to lowercase token text.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rext</span> <span class="o">=</span> <span class="n">RegexTokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">rext</span><span class="p">(</span><span class="s">&quot;This is a TEST&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">LowercaseFilter</span><span class="p">(</span><span class="n">stream</span><span class="p">)]</span>
<span class="go">[&quot;this&quot;, &quot;is&quot;, &quot;a&quot;, &quot;test&quot;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.PassFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">PassFilter</tt><a class="headerlink" href="#caterpillar.processing.analysis.filter.PassFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>An identity filter: passes the tokens through untouched.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.PositionalLowercaseWordFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">PositionalLowercaseWordFilter</tt><big>(</big><em>position</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.filter.PositionalLowercaseWordFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>Uses unicode.lower() to lowercase single word tokens that appear to be titles and are in a certain position.</p>
<p>Only applies the filter if the token only contains only 1 word (ie no spaces) and unicode.istitle() returns true.
Used internally to force the case of words appearing at the start of a sentence to lower if it isn&#8217;t part of a
compound name.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rext</span> <span class="o">=</span> <span class="n">RegexTokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">rext</span><span class="p">(</span><span class="s">&quot;This is a TEST&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">LowercaseFilter</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">()]</span>
<span class="go">[&quot;this&quot;, &quot;is&quot;, &quot;a&quot;, &quot;TEST&quot;]</span>
</pre></div>
</div>
<p>Required Arguments:
position &#8211; A 0 based int index the token needs to be in to apply this filter.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.PotentialBiGramFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">PotentialBiGramFilter</tt><a class="headerlink" href="#caterpillar.processing.analysis.filter.PotentialBiGramFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>Identifies bi-grams in a token stream along with regular tokens.</p>
<p>Potential bi-grams won&#8217;t include stopped tokens or names.</p>
<p>WARNING: This filter differs from most other filters in that it returns a list of token objects, not just single
tokens. This is done purely for performance. If it finds a non-bi-gram, a list of just a single token is returned.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.StopFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">StopFilter</tt><big>(</big><em>stoplist</em>, <em>minsize=3</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.filter.StopFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>Marks &#8220;stop&#8221; words (words too common to index) in the stream.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rext</span> <span class="o">=</span> <span class="n">RegexTokenizer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">rext</span><span class="p">(</span><span class="s">&quot;this is a test&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stopper</span> <span class="o">=</span> <span class="n">StopFilter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">stopper</span><span class="p">(</span><span class="n">stream</span><span class="p">)]</span>
<span class="go">[&quot;this&quot;, &quot;test&quot;]</span>
</pre></div>
</div>
<p>Required Arguments
stoplist &#8211; A list of stop words lower cased.</p>
<p>Optional Arguments
minsize &#8211; An int indicating the smallest acceptable word length.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.filter.SubstitutionFilter">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.filter.</tt><tt class="descname">SubstitutionFilter</tt><big>(</big><em>pattern</em>, <em>replacement</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.filter.SubstitutionFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.filter.Filter" title="caterpillar.processing.analysis.filter.Filter"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.filter.Filter</span></tt></a></p>
<p>Performs a regular expression substitution on the token text.</p>
<p>This is especially useful for removing text from tokens, for example hyphens:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ana</span> <span class="o">=</span> <span class="n">RegexTokenizer</span><span class="p">(</span><span class="s">r&quot;\S+&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">SubstitutionFilter</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Because it has the full power of the <tt class="docutils literal"><span class="pre">regex.sub()</span></tt> method behind it, this filter can perform some fairly complex
transformations. For example, to take tokens like <tt class="docutils literal"><span class="pre">'a=b',</span> <span class="pre">'c=d',</span> <span class="pre">'e=f'</span></tt> and change them to <tt class="docutils literal"><span class="pre">'b=a',</span> <span class="pre">'d=c',</span>
<span class="pre">'f=e'</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sf</span> <span class="o">=</span> <span class="n">SubstitutionFilter</span><span class="p">(</span><span class="s">&quot;([^/]*)/(./*)&quot;</span><span class="p">,</span> <span class="s">r&quot;\2/\1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Required Arguments
pattern &#8211; A pattern string or compiled regular expression object describing the text to replace.
replacement &#8211; A string of substitution text.</p>
</dd></dl>

</div>
<div class="section" id="module-caterpillar.processing.analysis.stopwords">
<span id="caterpillar-processing-analysis-stopwords-module"></span><h2><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis.stopwords</span></tt> module<a class="headerlink" href="#module-caterpillar.processing.analysis.stopwords" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="caterpillar.processing.analysis.stopwords.parse_stopwords">
<tt class="descclassname">caterpillar.processing.analysis.stopwords.</tt><tt class="descname">parse_stopwords</tt><big>(</big><em>stopwords_file</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.stopwords.parse_stopwords" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse stopwords from a plain text file.</p>
<p>Expects a single stopword on every line.</p>
</dd></dl>

</div>
<div class="section" id="module-caterpillar.processing.analysis.tokenize">
<span id="caterpillar-processing-analysis-tokenize-module"></span><h2><tt class="docutils literal"><span class="pre">caterpillar.processing.analysis.tokenize</span></tt> module<a class="headerlink" href="#module-caterpillar.processing.analysis.tokenize" title="Permalink to this headline">¶</a></h2>
<p>Tools to tokenize text.</p>
<dl class="class">
<dt id="caterpillar.processing.analysis.tokenize.EverythingTokenizer">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.tokenize.</tt><tt class="descname">EverythingTokenizer</tt><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.EverythingTokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.tokenize.Tokenizer" title="caterpillar.processing.analysis.tokenize.Tokenizer"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.tokenize.Tokenizer</span></tt></a></p>
<p>Returns entire input string as a single token generator.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.tokenize.ParagraphTokenizer">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.tokenize.</tt><tt class="descname">ParagraphTokenizer</tt><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.ParagraphTokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.tokenize.RegexpTokenizer" title="caterpillar.processing.analysis.tokenize.RegexpTokenizer"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.tokenize.RegexpTokenizer</span></tt></a></p>
<p>Tokenize a string into paragraphs.</p>
<p>This is accomplished by treating any sentence break character plus any text (ie not a space) followed by a new line
character as the end of a paragraph.</p>
<p>Because of titles etc., we also treat any two or more consecutive newline characters as a paragraph break.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.tokenize.RegexpTokenizer">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.tokenize.</tt><tt class="descname">RegexpTokenizer</tt><big>(</big><em>pattern</em>, <em>gaps=False</em>, <em>flags=312</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.RegexpTokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.tokenize.Tokenizer" title="caterpillar.processing.analysis.tokenize.Tokenizer"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.tokenize.Tokenizer</span></tt></a></p>
<p>A <tt class="docutils literal"><span class="pre">Tokenizer</span></tt> that splits a string using a regular expression.</p>
<p>This class can be used to match either the tokens or the separators between tokens.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">RegexpTokenizer</span><span class="p">(</span><span class="s">&#39;\w+|\$[\d\.]+|\S+&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This class uses the new python regex module instead of the existing re module. This means unicode codepoint
properties are supported.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">RegexpTokenizer</span><span class="p">(</span><span class="s">&#39;\w+|\$[\p{N}\.]+|\S+&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Required Arguments
pattern &#8211; A str used to build this tokenizer. This pattern may safely contain grouping parentheses.</p>
<p>Optional Arguments
gaps &#8211; A bool indicating this tokenizer&#8217;s pattern should be used to find separators between tokens; False if this</p>
<blockquote>
<div>tokenizer&#8217;s pattern should be used to find the tokens themselves. Defaults to False.</div></blockquote>
<dl class="docutils">
<dt>flags &#8211; A int mask of regexp flags used to compile this tokenizer&#8217;s pattern.  By default, the following flags are</dt>
<dd>used: <cite>regex.UNICODE | regex.MULTILINE | regex.DOTALL | regex.VERSION1</cite>.</dd>
</dl>
<dl class="method">
<dt id="caterpillar.processing.analysis.tokenize.RegexpTokenizer.tokenize">
<tt class="descname">tokenize</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.RegexpTokenizer.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the tokenizing.</p>
<p>Required Argument
value &#8211; The unicode string to tokenize.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.tokenize.Token">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.tokenize.</tt><tt class="descname">Token</tt><big>(</big><em>value=None</em>, <em>position=None</em>, <em>stopped=None</em>, <em>index=None</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.Token" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>A class representing a &#8220;token&#8221; (usually a word) extracted from the source text being analysed.</p>
<p>Because object instantiation in Python is slow all tokenizers use this class as singleton. This means that ONE
SINGLE Token object is YIELD OVER AND OVER by tokenizers, changing the attributes each time.</p>
<p>This trick means that consumers of tokens (i.e. filters) must never try to hold onto the token object between loop
iterations, or convert the token generator into a list. Instead, save the attributes between iterations,
not the object!</p>
<dl class="method">
<dt id="caterpillar.processing.analysis.tokenize.Token.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.Token.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a deep copy of this object.</p>
</dd></dl>

<dl class="method">
<dt id="caterpillar.processing.analysis.tokenize.Token.update">
<tt class="descname">update</tt><big>(</big><em>value</em>, <em>stopped=False</em>, <em>position=None</em>, <em>index=None</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.Token.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-initialise this token instance with the passed values.</p>
<p>Required Arguments
value &#8211; The unicode value of this Token.</p>
<p>Optional Arguments
stopped &#8211; A bool indicating if this token was stopped by a filter.
position &#8211;  A int indicating the original position in the stream. This is a 0 based index.
index &#8211;  A tuple of two ints indicating the start and end index of this token in the original stream.</p>
<p>Returns this token.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.tokenize.Tokenizer">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.tokenize.</tt><tt class="descname">Tokenizer</tt><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.Tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>Abstract base class for all Tokenizers.</p>
<p>Forces all implementers to implement a tokenize() method.</p>
</dd></dl>

<dl class="class">
<dt id="caterpillar.processing.analysis.tokenize.WordTokenizer">
<em class="property">class </em><tt class="descclassname">caterpillar.processing.analysis.tokenize.</tt><tt class="descname">WordTokenizer</tt><big>(</big><em>detect_compound_names=True</em><big>)</big><a class="headerlink" href="#caterpillar.processing.analysis.tokenize.WordTokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#caterpillar.processing.analysis.tokenize.RegexpTokenizer" title="caterpillar.processing.analysis.tokenize.RegexpTokenizer"><tt class="xref py py-class docutils literal"><span class="pre">caterpillar.processing.analysis.tokenize.RegexpTokenizer</span></tt></a></p>
<p>Tokenize a string into words.</p>
<p>This <tt class="docutils literal"><span class="pre">Tokenizer</span></tt> contains a bunch of special logic that in an ideal world would be separated out into filters.
Unfortunately this isn&#8217;t an ideal world and filters can be slow. The tokenizer will:</p>
<blockquote>
<div><ul class="simple">
<li>return compound names as a single token;</li>
<li>keep emails in-tact as a single token;</li>
<li>keep contractions except possessives as a single token;</li>
<li>return numbers, including decimal numbers as a single token; and</li>
<li>break the text into words based on whitespace separation and punctuation (excepted where stated);</li>
</ul>
</div></blockquote>
</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="caterpillar.searching.html" class="btn btn-neutral float-right" title="caterpillar.searching package"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="caterpillar.processing.html" class="btn btn-neutral" title="caterpillar.processing package"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Ryan Stuart, Kris Rogers, Kapiche Limited.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>